!function(e){e.extend(!0,{ddMap:{defaults:{markers:new Array,element:"map",defaultZoom:15,defaultType:"map",scrollZoom:!1,mapCenterOffset:!1,markerOptions:{},controls:[{name:"zoomControl"},{name:"typeSelector"},{name:"fullscreenControl"},{name:"geolocationControl"},{name:"rulerControl"}],mapOptions:{suppressMapOpenBlock:!0},apiKey:""},prepareMarkers:function(t){var a=new ymaps.GeoObjectCollection;return Array.isArray(t.markers)?(2==t.markers.length&&e.isNumeric(t.markers[0])&&e.isNumeric(t.markers[1])?a.add(new ymaps.Placemark(t.markers,{},t.markerOptions)):t.markers.forEach((n=>{e.isPlainObject(n)&&Array.isArray(n.latLng)&&2==n.latLng.length&&a.add(new ymaps.Placemark(n.latLng,{balloonContent:"string"==typeof n.content?e.trim(n.content):""},t.markerOptions))})),a):a},initStatic:function(t){if(!this.isStaticInited&&(this.isStaticInited=!0,"undefined"==typeof ymaps)){var a="//api-maps.yandex.ru/2.1/?lang="+navigator.language;t.apiKey.length>0&&(a+="&apikey="+t.apiKey),e("head").append('<script defer src="'+a+'"><\/script>')}},init:function(t){var a=this;t=e.extend({},a.defaults,t),a.initStatic({apiKey:t.apiKey}),ymaps.ready((function(){var n=a.prepareMarkers(t),r=n.getLength();if(r>0){t.$element=e(t.$element),0==t.$element.height()&&t.$element.height(400);var o=new ymaps.Map(t.$element.get(0),{center:n.get(0).geometry.getCoordinates(),zoom:t.defaultZoom,type:"yandex#"+t.defaultType,controls:[]},t.mapOptions);if(Array.isArray(t.controls)&&t.controls.forEach((e=>{e.name&&o.controls.add(e.name,e.options)})),t.scrollZoom||o.behaviors.disable("scrollZoom"),o.geoObjects.add(n),r>1&&(t.$element.is(":hidden")?o.events.once("sizechange",(function(){o.setBounds(n.getBounds())})):o.setBounds(n.getBounds())),Array.isArray(t.mapCenterOffset)&&2==t.mapCenterOffset.length){var i=o.getGlobalPixelCenter();o.setGlobalPixelCenter([i[0]-t.mapCenterOffset[0],i[1]-t.mapCenterOffset[1]])}t.$element.data("ddMap",{map:o}).trigger("ddAfterInit")}}))}}}),e.fn.ddMap=function(t){var a=e.ddMap;return e(this).each((function(){a.init(e.extend(t,{$element:this}))}))}}(jQuery);