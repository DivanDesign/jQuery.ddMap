!function(e){e.extend(!0,{ddMap:{defaults:{markers:new Array,element:"map",defaultZoom:15,defaultType:"map",scrollZoom:!1,mapCenterOffset:!1,markerOptions:{},controls:[{name:"zoomControl"},{name:"typeSelector"},{name:"fullscreenControl"},{name:"geolocationControl"},{name:"rulerControl"}],mapOptions:{suppressMapOpenBlock:!0}},prepareMarkers:function(t){var n=new ymaps.GeoObjectCollection;return Array.isArray(t.markers)?(2==t.markers.length&&e.isNumeric(t.markers[0])&&e.isNumeric(t.markers[1])?n.add(new ymaps.Placemark(t.markers,{},t.markerOptions)):t.markers.forEach((a=>{e.isPlainObject(a)&&Array.isArray(a.latLng)&&2==a.latLng.length&&n.add(new ymaps.Placemark(a.latLng,{balloonContent:"string"==typeof a.content?e.trim(a.content):""},t.markerOptions))})),n):n},initStatic:function(){this.isStaticInited||(this.isStaticInited=!0,"undefined"==typeof ymaps&&e("head").append('<script defer src="//api-maps.yandex.ru/2.1/?lang='+navigator.language+'"><\/script>'))},init:function(t){var n=this;n.initStatic(),t=e.extend({},n.defaults,t),ymaps.ready((function(){var a=n.prepareMarkers(t),r=a.getLength();if(r>0){t.$element=e(t.element),0==t.$element.height()&&t.$element.height(400);var o=new ymaps.Map(t.element,{center:a.get(0).geometry.getCoordinates(),zoom:t.defaultZoom,type:"yandex#"+t.defaultType,controls:[]},t.mapOptions);if(Array.isArray(t.controls)&&t.controls.forEach((e=>{e.name&&o.controls.add(e.name,e.options)})),t.scrollZoom||o.behaviors.disable("scrollZoom"),o.geoObjects.add(a),r>1&&(t.$element.is(":hidden")?o.events.once("sizechange",(function(){o.setBounds(a.getBounds())})):o.setBounds(a.getBounds())),Array.isArray(t.mapCenterOffset)&&2==t.mapCenterOffset.length){var s=o.getGlobalPixelCenter();o.setGlobalPixelCenter([s[0]-t.mapCenterOffset[0],s[1]-t.mapCenterOffset[1]])}t.$element.data("ddMap",{map:o}).trigger("ddAfterInit")}}))}}}),e.fn.ddMap=function(t){var n=e.ddMap;return e(this).each((function(){n.init(e.extend(t,{element:this}))}))},e((function(){e.ddMap.initStatic()}))}(jQuery);