!function(e){e.extend(!0,{ddYMap:{defaults:{markers:new Array,element:"map",defaultZoom:15,defaultType:"map",scrollZoom:!1,mapCenterOffset:!1,markerOptions:{},controls:[{name:"zoomControl"},{name:"typeSelector"},{name:"fullscreenControl"},{name:"geolocationControl"},{name:"rulerControl"}],mapOptions:{suppressMapOpenBlock:!0}},prepareMarkers:function(t){var r=new ymaps.GeoObjectCollection;if(!Array.isArray(t.markers))return r;if(2==t.markers.length&&e.isNumeric(t.markers[0])&&e.isNumeric(t.markers[1]))r.add(new ymaps.Placemark(t.markers,{},t.markerOptions));else for(var n=0;n<t.markers.length;n++)e.isPlainObject(t.markers[n])&&Array.isArray(t.markers[n].latLng)&&2==t.markers[n].latLng.length&&r.add(new ymaps.Placemark(t.markers[n].latLng,{balloonContent:"string"==typeof t.markers[n].content?e.trim(t.markers[n].content):""},t.markerOptions));return r},initStatic:function(){this.isStaticInited||(this.isStaticInited=!0,"undefined"==typeof ymaps&&e("head").append('<script defer src="//api-maps.yandex.ru/2.1/?lang='+navigator.language+'"><\/script>'))},init:function(t){var r=this;r.initStatic(),t=e.extend({},r.defaults,t),ymaps.ready((function(){var n=r.prepareMarkers(t),a=n.getLength();if(a>0){t.$element=e(t.element),0==t.$element.height()&&t.$element.height(400);var o=new ymaps.Map(t.element,{center:n.get(0).geometry.getCoordinates(),zoom:t.defaultZoom,type:"yandex#"+t.defaultType,controls:[]},t.mapOptions);if(Array.isArray(t.controls)&&t.controls.forEach((e=>{e.name&&o.controls.add(e.name,e.options)})),t.scrollZoom||o.behaviors.disable("scrollZoom"),o.geoObjects.add(n),a>1&&(t.$element.is(":hidden")?o.events.once("sizechange",(function(){o.setBounds(n.getBounds())})):o.setBounds(n.getBounds())),Array.isArray(t.mapCenterOffset)&&2==t.mapCenterOffset.length){var s=o.getGlobalPixelCenter();o.setGlobalPixelCenter([s[0]-t.mapCenterOffset[0],s[1]-t.mapCenterOffset[1]])}t.$element.data("ddYMap",{map:o}).trigger("ddAfterInit")}}))}}}),e.fn.ddYMap=function(t){var r=e.ddYMap;return e(this).each((function(){r.init(e.extend(t,{element:this}))}))},e((function(){e.ddYMap.initStatic()}))}(jQuery);